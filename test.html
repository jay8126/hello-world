<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>앱 열기 테스트</title>
  <style>
    body {
      width: 100%;
      height:100%;
    }
    #btn {
        width: 90%;
        height: 10%;
    }

    #div-console {
        width: 100%;        
        height: 80%;
        border : 1px solid black;
        padding: 10px;
    }
  </style>
</head>
<body>
<button type="button" id="btn" onclick="openApp()">앱 열기</button>
<div id="div-console">
</div>

<script>
const urls = [
  "com.samsungcard.sbluevery://sbluevery",
  "com.samsungcard.hwbluevery://hwbluevery",
  "com.samsungcard.pbluevery://pbluevery"
];

function openApp() {
  let i = 0;
  let j = 0;
  const schInterval = setInterval(() => {
    divConsoleLog(urls[i] + "," + i + "," + j);

    if (j === 0) {
        location.href = urls[i];
    }

    if (document.webkitHidden || document.hidden) {
      clearInterval(schInterval);
      alert("앱이 설치 되어 있습니다.");
    } else if (i === urls.length - 1 && j === 4) {
      clearInterval(schInterval);
    } else if (j === 4) {
      i++;
      j = 0;
    } else {
      j++;
    }
  }, 100);
}

function divConsoleLog(txt) {
  const div =   document.getElementById('div-console');
  div.insertAdjacentHTML("afterbegin", `<div>${txt}</div>`);
}

/*
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("btn").addEventListener("click", () => {
    openApp();
  });
});
*/

    
</script>
</body>
</html>